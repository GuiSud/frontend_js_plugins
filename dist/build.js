(()=>{var e={190:e=>{let t=function(){let e={el:null,canvas:null,type:null,options:null,render(n){let r;this.options=n,"string"==typeof n.el?r=document.querySelector(n.el):"object"==typeof n.el&&(r=n.el);let o=document.createElement("div");o.classList.add("canvasBox");let s=document.createElement("canvas");s.setAttribute("id","Canvas"),s.innerText="您的浏览器不支持该插件！",s.dataset.toggle=!1,s.addEventListener("mousedown",a),s.addEventListener("mousemove",a),s.addEventListener("mouseup",a),o.appendChild(s);let i=document.createElement("canvas");i.setAttribute("id","bgCanvas"),i.innerText="您的浏览器不支持该插件！",this.canvas=i,o.appendChild(i),e.el=o,r.appendChild(o),r.querySelectorAll("canvas").forEach((e=>{let t=n.img.naturalWidth,a=n.img.naturalHeight;if(e.width=t+40,e.height=a+40,e.style.width=`${t+40}px`,e.style.height=`${a+40}px`,"bgCanvas"===e.id){let r=e.getContext("2d");n.img.getAttribute("src").includes("http")&&n.img.setAttribute("crossOrigin","anonymous"),setTimeout((()=>{r.drawImage(n.img,20,20,t,a)}),100)}}));let l=document.createElement("div");l.classList.add("hold-all"),l.innerHTML="<span class='rotate rotateLeft' title='向左旋转' data-type='rotate-left'></span>\n                                    <span class='rotate rotateRight' title='向右旋转' data-type='rotate-right'></span>\n                                    <span class='line' title='线条' data-type='line'></span>\n                                    <span class='rect' title='矩形' data-type='rect'></span>\n                                    <span class='ellipse' title='椭圆' data-type='ellipse'></span>\n                                    <span class='paint-brush' title='画笔' data-type='paint-brush'></span>\n                                    <span class='text' title='写字' data-type='text'></span>\n                                    <span data-type='save'>存</span>",l.addEventListener("click",t,!1),r.appendChild(l)},async save(){try{let t=await(e=this.canvas,new Promise(((t,n)=>{let a=null;a=e.toDataURL("image/jpeg",1);let r=a.split(","),o=r[0].match(/:(.*?);/)[1],s=o.split("/")[1],i=atob(r[1]),l=i.length,c=new Uint8Array(l);for(;l--;)c[l]=i.charCodeAt(l);t(new File([c],`名字随便起的.${s}`,{type:o}))})));console.log(t)}catch(e){this.options.error(e)}var e}};function t(t){if("SPAN"===t.target.tagName){let n=t.target;if(e.type=n.dataset.type,n.classList.contains("active"))n.classList.toggle("active");else if(function(e,t,n){let a=null;"string"==typeof e?a=document.querySelector(e):"object"==typeof e&&(a=e),a.querySelectorAll("span").forEach(((e,t,n)=>{e.classList.remove("active")}))}(n.parentNode),n.classList.contains("rotate")){let e=n.parentElement.previousElementSibling,t=e.style.transform,{type:a}=n.dataset;t=t?parseInt(t.split("(")[1].split("deg)")[0]):0,"rotate-left"===a?t-=90:t+=90,e.style=`transform:rotate(${t}deg)`}else n.classList.add("active");"save"===n.dataset.type&&e.save()}}let n={oldX:null,oldY:null,newX:null,newY:null};function a(t){let a=this.getContext("2d");a.strokeStyle="red",a.fillStyle="red";let o=e.canvas.getContext("2d");switch(o.strokeStyle="red",o.fillStyle="red",o.font="16px sans-serif",t.type){case"mousedown":if(console.log(e.el),this.dataset.toggle=!0,n.oldX=t.offsetX,n.oldY=t.offsetY,"text"===e.type){let t=document.createElement("textarea");t.classList.add("text"),t.style.cssText=`position: absolute;left: ${n.oldX}px; top: ${n.oldY}px;outline: none; z-index: 4;`,e.el.appendChild(t),setTimeout((()=>{t.focus()}),100),s=t,i=o,l={x:n.oldX,y:n.oldY},s.addEventListener("blur",(function(e){this.remove(),i.fillText(this.value,l.x,l.y+8)})),e.type=null,e.el.parentElement.querySelector("span.text").classList.remove("active")}"paint-brush"===e.type&&(o.beginPath(),o.moveTo(n.oldX,n.oldY));break;case"mousemove":"true"===this.dataset.toggle&&(n.newX=t.offsetX,n.newY=t.offsetY,"paint-brush"!=e.type?(a.clearRect(0,0,this.width,this.height),r(n,e.type,a)):r(n,e.type,o));break;case"mouseup":this.dataset.toggle=!1,n.newX=t.offsetX,n.newY=t.offsetY,a.clearRect(0,0,this.width,this.height),"paint-brush"==e.type&&"text"==e.type||r(n,e.type,o),o.save();break;default:console.log("没有找到对应的操作")}var s,i,l}function r(e,t,n){switch("paint-brush"!=t&&n.beginPath(),console.log(t),t){case"line":n.moveTo(e.oldX,e.oldY),n.lineTo(e.newX,e.newY),n.stroke();break;case"rect":n.rect(e.oldX,e.oldY,e.newX-e.oldX,e.newY-e.oldY),n.stroke();break;case"ellipse":n.ellipse(e.oldX,e.oldY,Math.abs(e.newX-e.oldX),Math.abs(e.newY-e.oldY),0,0,2*Math.PI),n.stroke();break;case"paint-brush":n.lineTo(e.newX,e.newY),n.stroke()}}return e}();e.exports=t},399:(e,t,n)=>{"use strict";n.d(t,{Z:()=>B});var a=n(81),r=n.n(a),o=n(645),s=n.n(o),i=n(667),l=n.n(i),c=new URL(n(661),n.b),p=new URL(n(523),n.b),d=new URL(n(581),n.b),u=new URL(n(910),n.b),f=new URL(n(904),n.b),h=new URL(n(172),n.b),g=new URL(n(998),n.b),b=s()(r()),v=l()(c),m=l()(p),x=l()(d),y=l()(u),w=l()(f),k=l()(h),L=l()(g);b.push([e.id,"* {\n  margin: 0px;\n  padding: 0px;\n}\n\n.GraffitiBox {\n  width: 100%;\n  height: 100%;\n  position: relative;\n}\n\n.GraffitiBox canvas {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0px;\n  top: 0px;\n  /* left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%); */\n}\n\n.GraffitiBox canvas#Canvas {\n  z-index: 2;\n}\n\n.GraffitiBox canvas#bgCanvas {\n  z-index: 1;\n}\n\n.GraffitiBox .canvasBox {\n  position: relative;\n  height: 100%;\n  width: 100%;\n  overflow: auto;\n}\n\n.GraffitiBox .hold-all {\n  position: absolute;\n  right: -1px;\n  bottom: -32px;\n  /* padding: 5px; */\n  background-color: rgba(255, 255, 255, .7);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: row;\n  z-index: 3;\n}\n\n.GraffitiBox .hold-all span {\n  width: 30px;\n  height: 30px;\n  border-left: 1px solid #ccc;\n  border-top: 1px solid #ccc;\n  border-bottom: 1px solid #ccc;\n  cursor: pointer;\n  background-color: #e5e5e5;\n  transition: background-color .3s;\n  background-size: 80%;\n  background-position: center center;\n  text-align: center;\n  line-height: 30px;\n}\n\n.GraffitiBox .hold-all span {\n  position: relative;\n}\n\n.GraffitiBox .hold-all span img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  position: absolute;\n  left: 0%;\n  top: 0%;\n}\n\n.GraffitiBox .hold-all span:nth-last-of-type(1) {\n  border-right: 1px solid #ccc;\n}\n\n.GraffitiBox .hold-all span.active {\n  background-color: #fff;\n}\n\n.GraffitiBox .hold-all span:hover {\n  background-color: #fff;\n}\n\n.GraffitiBox .hold-all span:nth-last-of-child(1) {\n  border-right: 1px solid #ccc;\n}\n\n.GraffitiBox .hold-all span.line {\n  background-image: url("+v+");\n  background-repeat: no-repeat;\n}\n\n.GraffitiBox .hold-all span.rect {\n  background-image: url("+m+");\n  background-repeat: no-repeat;\n}\n\n.GraffitiBox .hold-all span.ellipse {\n  background-image: url("+x+");\n  background-repeat: no-repeat;\n}\n\n.GraffitiBox .hold-all span.paint-brush {\n  background-image: url("+y+");\n  background-repeat: no-repeat;\n}\n\n.GraffitiBox .hold-all span.text {\n  background-image: url("+w+");\n  background-repeat: no-repeat;\n}\n\n.GraffitiBox .hold-all span.rotateLeft {\n  background-image: url("+k+");\n  background-repeat: no-repeat;\n}\n\n.GraffitiBox .hold-all span.rotateRight {\n  background-image: url("+L+");\n  background-repeat: no-repeat;\n}",""]);const B=b},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",a=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),a&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),a&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,a,r,o){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(a)for(var i=0;i<this.length;i++){var l=this[i][0];null!=l&&(s[l]=!0)}for(var c=0;c<e.length;c++){var p=[].concat(e[c]);a&&s[p[0]]||(void 0!==o&&(void 0===p[5]||(p[1]="@layer".concat(p[5].length>0?" ".concat(p[5]):""," {").concat(p[1],"}")),p[5]=o),n&&(p[2]?(p[1]="@media ".concat(p[2]," {").concat(p[1],"}"),p[2]=n):p[2]=n),r&&(p[4]?(p[1]="@supports (".concat(p[4],") {").concat(p[1],"}"),p[4]=r):p[4]="".concat(r)),t.push(p))}},t}},667:e=>{"use strict";e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},81:e=>{"use strict";e.exports=function(e){return e[1]}},379:e=>{"use strict";var t=[];function n(e){for(var n=-1,a=0;a<t.length;a++)if(t[a].identifier===e){n=a;break}return n}function a(e,a){for(var o={},s=[],i=0;i<e.length;i++){var l=e[i],c=a.base?l[0]+a.base:l[0],p=o[c]||0,d="".concat(c," ").concat(p);o[c]=p+1;var u=n(d),f={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==u)t[u].references++,t[u].updater(f);else{var h=r(f,a);a.byIndex=i,t.splice(i,0,{identifier:d,updater:h,references:1})}s.push(d)}return s}function r(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var o=a(e=e||[],r=r||{});return function(e){e=e||[];for(var s=0;s<o.length;s++){var i=n(o[s]);t[i].references--}for(var l=a(e,r),c=0;c<o.length;c++){var p=n(o[c]);0===t[p].references&&(t[p].updater(),t.splice(p,1))}o=l}}},569:e=>{"use strict";var t={};e.exports=function(e,n){var a=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(n)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var a="";n.supports&&(a+="@supports (".concat(n.supports,") {")),n.media&&(a+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(a+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),a+=n.css,r&&(a+="}"),n.media&&(a+="}"),n.supports&&(a+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(a,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},581:(e,t,n)=>{"use strict";e.exports=n.p+"538e860642f21724e09e.png"},661:(e,t,n)=>{"use strict";e.exports=n.p+"3874de6ca6bf447d3a79.png"},910:(e,t,n)=>{"use strict";e.exports=n.p+"c68c83812cb1bc4eea4e.png"},523:(e,t,n)=>{"use strict";e.exports=n.p+"2fc83b320d73385706f2.png"},172:(e,t,n)=>{"use strict";e.exports=n.p+"808d7b4bb9f086b717f8.png"},998:(e,t,n)=>{"use strict";e.exports=n.p+"f4c2a9794cfbb6b6dcfe.png"},904:(e,t,n)=>{"use strict";e.exports=n.p+"b7cf4c92ecb214bf34db.png"}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={id:a,exports:{}};return e[a](o,o.exports,n),o.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");a.length&&(e=a[a.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.b=document.baseURI||self.location.href,(()=>{"use strict";var e=n(190),t=n.n(e),a=n(379),r=n.n(a),o=n(795),s=n.n(o),i=n(569),l=n.n(i),c=n(565),p=n.n(c),d=n(216),u=n.n(d),f=n(589),h=n.n(f),g=n(399),b={};b.styleTagTransform=h(),b.setAttributes=p(),b.insert=l().bind(null,"head"),b.domAPI=s(),b.insertStyleElement=u(),r()(g.Z,b),g.Z&&g.Z.locals&&g.Z.locals,window.Graffiti=t()})()})();